var app=app||{};!function(){"use strict";app.map,app.service,app.mapBounds,app.MapView={self:this,initMap:function(){app.map=new google.maps.Map(document.getElementById("map"),{center:{lat:19.4119984,lng:-99.1691486},zoom:14}),app.mapBounds=new google.maps.LatLngBounds,window.addEventListener("resize",function(a){app.map.fitBounds(app.mapBounds)})},createMarker:function(a,b){var c=a.geometry.location.lat(),d=a.geometry.location.lng(),e=a.name,f=app.mapBounds;b.marker=new google.maps.Marker({map:app.map,animation:google.maps.Animation.DROP,position:a.geometry.location,title:e});var g=new google.maps.InfoWindow({content:'<div id="info-button-div" class="map-info-window"></div>',maxWidth:250});b.marker.toggleMarkerAction=function(){app.placeCollection.allPlaces.forEach(function(a){a!==b&&a.isActive===!0&&a.marker.toggleMarkerAction()}),b.isActive===!0?(b.marker.setAnimation(null),$("#info-button").appendTo("#button-holder"),g.close(),b.isActive=!1,app.thisViewModel.setActivePlace("")):(b.marker.setAnimation(google.maps.Animation.BOUNCE),g.open(map,b.marker),b.isMarkerNamed===!1&&(b.isMarkerNamed=!0,$("#info-button-div").append("<h3>"+b.name+"</h3>"),$("#info-button-div").append("<p>"+b.description+"</p>")),$("#info-button").appendTo("#info-button-div"),b.isActive=!0,app.thisViewModel.setActivePlace(b.name))},google.maps.event.addListener(b.marker,"click",b.marker.toggleMarkerAction),google.maps.event.addListener(g,"closeclick",function(){g.open(map,b.marker),b.marker.toggleMarkerAction()}),f.extend(new google.maps.LatLng(c,d)),app.map.fitBounds(f),app.map.setCenter(f.getCenter())},searchLocations:function(a){app.service=new google.maps.places.PlacesService(app.map),a.forEach(function(a){var b={query:a.name};app.service.textSearch(b,function(b,c){c==google.maps.places.PlacesServiceStatus.OK?app.MapView.createMarker(b[0],a):(console.log("something went wrong with request"),console.log(c))})})},googleError:function(){alert("Google data not loaded")}}}();