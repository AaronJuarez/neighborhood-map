var app=app||{};!function(){"use strict";app.thisViewModel,app.ViewModel=function(){var a=this;app.thisViewModel=this,app.placeCollection.placesData.forEach(function(a){app.placeCollection.allPlaces.push(new app.PlaceModel.Place(a))}),this.filteredPlace=ko.observable(""),this.activePlace=ko.observable(""),this.infoWindowName=ko.observable(""),this.infoWindowDescription=ko.observable(""),this.setActivePlace=function(b){a.activePlace(b)},this.setInfoWindowName=function(b){a.infoWindowName(b)},this.setInfoWindowDescription=function(b){a.infoWindowDescription(b)},this.initialMarkPlaces=function(){app.MapView.searchLocations(app.placeCollection.allPlaces)},window.addEventListener("load",function(){a.initialMarkPlaces()}),this.toggleNav=function(){app.AppView.menuDisplay()},this.reset=function(){a.filteredPlace("")},this.placesList=ko.computed(function(){var a=this.filteredPlace().toLowerCase();return a?(app.placeCollection.allPlaces.forEach(function(b){var c=b.name.toLowerCase();c.includes(a)||(b.isActive===!0&&b.marker.toggleMarkerAction(),b.marker.setVisible(!1),app.placeCollection.removedPlaces.push(b))}),app.placeCollection.removedPlaces.forEach(function(a){var b=app.placeCollection.allPlaces.indexOf(a);b>=0&&app.placeCollection.allPlaces.splice(b,1)})):(app.placeCollection.allPlaces.forEach(function(a){a.isActive===!0&&a.marker.toggleMarkerAction()}),app.placeCollection.removedPlaces.forEach(function(a){a.marker.setVisible(!0),app.placeCollection.allPlaces.push(a)}),app.placeCollection.removedPlaces=[]),app.placeCollection.allPlaces},this),this.clickedListElem=function(a){app.AppView.hideSidebar(),a.marker.toggleMarkerAction()},this.showInfo=function(){var b=a.activePlace();app.AppView.getFlickrImg(b),app.AppView.getWikipediaArticle(b)},this.deleteInfo=function(){a.activePlace(""),app.AppView.flickrData(""),app.AppView.wikipediaData("")}},ko.applyBindings(new app.ViewModel)}();