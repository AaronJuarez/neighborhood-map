var app=app||{};!function(){"use strict";app.map,app.service,app.mapBounds,app.infoWindow,app.MapView={initMap:function(){app.map=new google.maps.Map(document.getElementById("map"),{center:{lat:19.4119984,lng:-99.1691486},zoom:14}),app.mapBounds=new google.maps.LatLngBounds,window.addEventListener("resize",function(a){app.map.fitBounds(app.mapBounds)}),this.infoWindowInit()},infoWindowInit:function(){var a=$("#info-button-div");app.infoWindow=new google.maps.InfoWindow({content:a[0],maxWidth:300}),google.maps.event.addListener(app.infoWindow,"closeclick",function(){app.placeCollection.allPlaces.forEach(function(a){a.isActive===!0&&(app.infoWindow.open(map,a.marker),a.marker.toggleMarkerAction())})})},createMarker:function(a,b){var c=a.geometry.location.lat(),d=a.geometry.location.lng(),e=a.name,f=app.mapBounds;b.marker=new google.maps.Marker({map:app.map,animation:google.maps.Animation.DROP,position:a.geometry.location,title:e}),b.marker.toggleMarkerAction=function(){app.placeCollection.allPlaces.forEach(function(a){a!==b&&a.isActive===!0&&a.marker.toggleMarkerAction()}),b.isActive===!0?(app.thisViewModel.setInfoWindowName(""),app.thisViewModel.setInfoWindowDescription(""),b.marker.setAnimation(null),app.infoWindow.close(),b.isActive=!1,app.thisViewModel.setActivePlace("")):(b.marker.setAnimation(google.maps.Animation.BOUNCE),app.infoWindow.open(map,b.marker),b.isActive=!0,app.thisViewModel.setActivePlace(b.name),app.thisViewModel.setInfoWindowName(b.name),app.thisViewModel.setInfoWindowDescription(b.description),app.infoWindow.close(),app.infoWindow.open(map,b.marker))},google.maps.event.addListener(b.marker,"click",b.marker.toggleMarkerAction),f.extend(new google.maps.LatLng(c,d)),app.map.fitBounds(f),app.map.setCenter(f.getCenter())},searchLocations:function(a){app.service=new google.maps.places.PlacesService(app.map),a.forEach(function(a){var b={query:a.name};app.service.textSearch(b,function(b,c){c==google.maps.places.PlacesServiceStatus.OK?app.MapView.createMarker(b[0],a):(app.MapView.googleError(),console.log("something went wrong with request "+c))})})},googleError:function(){alert("Google data not loaded")}}}();